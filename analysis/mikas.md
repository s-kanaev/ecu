# МИКАС 7

## Вход ДПКВ

Ожидание (возможного) - выход датчика (или его вход в 'мозок') логический. Смысл сигнала -
срез (переход ```0-1``` или ```1-0```) есть сообщение о провороте коленвала на некую дельту.
Должно быть обозначение "ноля" или "начала отсчёта" (ВМТ первого цилиндра).

Ожидание (невозможного, ибо три провода всего) - выход есть готовое значение положения коленвала (энкодер).

Назначение компонентов:
* C17 - шунт на входе;
* R15 - разрядник для C17;
* R17 - ограничитель тока через VD1.1, VD1.2;
* C16, C22 - ??? // приведение к имеющемуся "нулю"?;
* DA2-1 - триггер Шмитта;
* VD1.1, VD1.2 - ограничитель входного напряжения, диоды типа BAS70 или 1N4148, ```V_f = 0.5 V (approx.)```
* R12, R13 - задают ширину петли гистерезиса на DA2-1;
* R19, R20 - делитель напряжения (```1-1 => 2.5 V```), который:
    - задаёт центр петли гистерезиса;
    - задаёт смещение ограничителя входного напряжения.

Ширина петли гистерезиса: ```H = (R12 / R13) * 5V = 0.1 V (approx.)```.
Верхний порог ```V_high = 2.5 + 0.1 = 2.6 V```, нижний порог ```V_low = 2.5 - 0.1 = 2.4 V```.

Ограничитель входного напряжения: ```2.5 - 0.5 ... 2.5 + 0.5 = 2 .. 3 V```.
Преобразование происходит из диапазона ```-250 .. 250 V``` в диапазон ```2 .. 3 V```
посредством ограничения (обрезания) до ```-0.5 .. 0.5 V``` и смещение на ```+2.5 V```.

DA2-1 преобразует имеющиеся ```2 .. 3 V``` в логические уровни (```0 V``` и ```+5 V```).
Порог переключения в 'единицу' - ```2.6 V```, в 'ноль' - ```2.4 V```.

Разность напряжений на выходе ДПКВ, равная ```0 V```, говорит о прохождении середины зуба.
Граница перехода выхода триггера DA2-1 в любую сторону говорит об уже случившемся прохождении середины зуба.
Вот такая бяка...

Выход триггера DA2-1 уходит напрямую в 'мозок' SAF-C509L на ногу ```P1.3```.

ВМТ первого и четвёртого цилиндров совпадает с 20-м (после выреза) зубом синхродиска.
Один зуб, вместе с промежутком до следующего, имеет ширину 6 градусов оборота ДПКВ.
На синхродиске 58 зубов (схема ```60 - 2```).

Ожидание (возможного) оправдалось. Начало отсчёта имеется. Правда, оно не совсем ВМТ первого цилиндра.
Точнее, совсем не ВМТ. Возможное объяснение -- так сделано для лучшего удобства счёта.

## Вход ДПРВ

Ожидание - выход логический, срез 0-1 сигнализирует о том, что следующее начало отсчёта совпадёт с ВМТ первого цилиндра.

Назначение компонентов:
* C30, R26, R30, C31 - фильтр.

Считываются показания датчика с ноги ```P1.2``` мозгов SAF-C509L.

ДПРВ позволяет определить ВМТ такта сжатия (перед рабочим ходом) первого цилиндра.
При положении середины отметчика (на распредвале) относительно оси ДПРВ коленвал должен быть повёрнут в положение,
при котором середина первого после выреза зуба синхродиска совпадает с осью ДПКВ.
Ширина отметчика распредвала составляет не менее ```24 +/- 1``` градус положения распредвала или ```12 +/- 0.5``` градус положения коленвала.

Сигнал с ДПРВ трактуется только как "есть/нет".
Такой сигнал формируется лишь однажды за два оборота коленвала.

Ожидание оправдалось.

### Вход ДМРВ

Питание датчик получает от главного реле. Оттуда же питается нога 37 мозгов.

Схем две. Для плёночного и нитевого ДМРВ.

Ожидание - используется аналоговый вход "мізків" (процессора).
Аналоговое значение преобразуется в значение расхода воздуха (кг/час) через тарировочную таблицу.
Прожиг управляется от мозгов через реле.

#### Плёнка

Клемма потенциометра корректировки заземлена через конденсатор.
"Минус" опущен на землю через перемычку.
"Плюс" - проходит через ФВЧ с частотой среза около 361Гц и попадает на ногу ```P8.3``` процессора.
Прожиг управляется через ИС HIP0045, нога ```OUT4```.

Этот HIP0045 управляется мозгами так:

| HIP0045 input | SAF-C509L output |
| ------------- | ---------------- |
| ```MOSI```    | ```P5.5```       |
| ```MISO```    | ```P5.7```       |
| ```CLK```     | ```P5.6```       |
| ```!CE```     | ```P6.6```       |
| ```IN0```     | ```P5.4```       |
| ```IN1```     | ```P9.1```       |
| ```!RESET```  | Софья Львовна, вы будете смеятся, но оно болтается в воздухе как то НЛО |

#### Нитка

